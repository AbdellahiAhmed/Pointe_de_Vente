/* ═══════════════════════════════════════════════════════════
   Admin Panel — NiceAdmin-compatible Theme
   Primary: #4154f1  |  Sidebar text: #012970
   Scoped to #header, #sidebar, #main to avoid POS conflicts
   ═══════════════════════════════════════════════════════════ */

/* ─── Design Tokens ─── */
:root {
  --adm-primary:        #4154f1;
  --adm-primary-light:  #e8eafc;
  --adm-primary-dark:   #3140d4;
  --adm-text-dark:      #012970;
  --adm-text-body:      #444444;
  --adm-text-muted:     #6c757d;
  --adm-sidebar-width:  300px;
  --adm-header-height:  60px;
  --adm-bg:             #f6f9ff;
  --adm-surface:        #ffffff;
  --adm-border:         #e0e6ed;
  --adm-shadow:         0 2px 15px rgba(0, 0, 0, 0.1);
  --adm-radius:         8px;

  /* Card icon colors */
  --adm-icon-blue-bg:   #e8eafc;
  --adm-icon-blue:      #4154f1;
  --adm-icon-green-bg:  #dcf6ec;
  --adm-icon-green:     #2eca6a;
  --adm-icon-purple-bg: #f1e6ff;
  --adm-icon-purple:    #9a4fe0;
  --adm-icon-orange-bg: #fef3c7;
  --adm-icon-orange:    #f59e0b;
}

/* ═══════════════════════════════════════════════════════════
   GLOBAL ADMIN BODY BASELINE
   Applied only when admin layout mounts (#header or #sidebar)
   ═══════════════════════════════════════════════════════════ */

body:has(#header),
body:has(#sidebar) {
  font-family: 'Open Sans', system-ui, -apple-system, sans-serif;
  background: var(--adm-bg);
  color: var(--adm-text-body);
  font-size: 14px;
  line-height: 1.6;

}

/* ═══════════════════════════════════════════════════════════
   ADMIN CSS ISOLATION — Override POS global styles
   ltr.scss defines destructive global selectors (a, .btn, .card,
   .form-control, .dropdown::after) with Tailwind @apply that
   break Bootstrap-based admin layout. These overrides use
   ID-scoped selectors (#main, #header, #sidebar) to win
   specificity over bare class selectors.
   ═══════════════════════════════════════════════════════════ */

/* ─── Links ─── */
/* POS sets: a { display:inline-flex; justify-content:center;
   align-items:center; text-decoration:underline; color:black } */
#sidebar a,
#header a,
#main a {
  text-decoration: none !important;
  color: inherit !important;
}

/* Sidebar nav links: flex for icon + text */
#sidebar a.nav-link {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: center !important;
}

/* Other sidebar links */
#sidebar a:not(.nav-link) {
  display: block !important;
}

/* Header nav links & dropdown items */
#header a.nav-link,
#header a.dropdown-item,
#header button.dropdown-item,
#main a.dropdown-item {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
}

/* Header non-nav links */
#header a:not(.nav-link):not(.dropdown-item):not(.btn) {
  display: flex !important;
  align-items: center !important;
}

/* Button-links in main content */
#main a.btn {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* d-grid button-links: left-aligned, full-width */
#main .d-grid a.btn,
#main .d-grid button.btn {
  display: flex !important;
  justify-content: flex-start !important;
}

/* Regular links in main: inline (for text, breadcrumbs, etc.) */
#main a:not(.btn):not(.dropdown-item):not(.nav-link) {
  display: inline !important;
}

/* ─── Buttons ─── */
/* POS sets: .btn { @apply bg-white uppercase font-bold border-2 h-[40px]
   inline-flex justify-center items-center } */
#main .btn,
#header .btn {
  font-family: 'Open Sans', system-ui, sans-serif !important;
  text-transform: none !important;
  font-weight: 500 !important;
  border-width: 1px !important;
  height: auto !important;
  /* background-color: transparent beats POS .btn{bg-white} by specificity
     (ID+class > class). NO !important so hover states can override. */
  background-color: transparent;
  line-height: 1.5;
}

/* ─── Cards ─── */
/* POS sets: .card { background:rgba(255,255,255,0.2); backdrop-filter:blur(5px);
   color:white; border:none } */
#main .card {
  color: var(--adm-text-body) !important;
  backdrop-filter: none !important;
}

/* ─── Dropdown overlay ─── */
/* POS sets: .dropdown::after { position:fixed; width:100%; height:100%; content:"" }
   to close dropdowns on outside click. Kill it in admin. */
#main .dropdown::after,
#header .dropdown::after {
  display: none !important;
}

/* ─── Form controls ─── */
/* POS sets: .form-control,.input { @apply border-primary-500 border-2 h-[40px]
   rounded-lg text-gray-500 } — breaks Bootstrap form styling */
#main .form-control,
#main select.form-select,
#main .form-control:focus {
  border-color: var(--adm-border) !important;
  border-width: 1px !important;
  border-radius: 6px !important;
  height: auto !important;
  font-family: 'Open Sans', system-ui, sans-serif !important;
  color: var(--adm-text-body) !important;
}

#main .form-control:focus {
  border-color: var(--adm-primary) !important;
  box-shadow: 0 0 0 0.25rem rgba(65, 84, 241, 0.15) !important;
}

/* ═══════════════════════════════════════════════════════════
   1. HEADER / TOP NAVBAR
   ═══════════════════════════════════════════════════════════ */

#header.header {
  background: var(--adm-surface);
  box-shadow: var(--adm-shadow);
  height: var(--adm-header-height);
  z-index: 997;
  padding: 0 20px;
  gap: 0;

  /* Logo area */
  .logo {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    padding-inline-end: 20px;
    border-inline-end: 1px solid var(--adm-border);

    img {
      max-height: 32px;
      width: auto;
    }

    span {
      font-size: 18px;
      font-weight: 700;
      color: var(--adm-text-dark);
      white-space: nowrap;
    }
  }

  /* Sidebar toggle icon */
  .toggle-sidebar-btn {
    font-size: 22px;
    color: var(--adm-text-dark);
    cursor: pointer;
    margin-inline-start: 16px;
    line-height: 1;
    transition: color 0.2s ease;

    &:hover {
      color: var(--adm-primary);
    }
  }
}

/* ─── Header Nav ─── */
#header .header-nav {
  .nav-item {
    position: relative;

    /* Generic nav links in header */
    .nav-link {
      color: var(--adm-text-body);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      transition: color 0.2s ease;

      &:hover,
      &:focus {
        color: var(--adm-primary);
      }

      img.rounded-circle {
        width: 36px;
        height: 36px;
        object-fit: cover;
        border: 2px solid var(--adm-border);
      }

      .dropdown-toggle::after {
        display: none;
      }
    }
  }
}

/* ─── Generic dropdown arrow style ─── */
#header .dropdown-menu-arrow {
  top: calc(100% + 4px);
  border: 1px solid var(--adm-border);
  border-radius: var(--adm-radius);
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
  padding: 6px 0;
  min-width: 160px;

  &::before {
    content: '';
    position: absolute;
    top: -6px;
    inset-inline-end: 14px;
    border-width: 0 6px 6px;
    border-style: solid;
    border-color: transparent transparent var(--adm-border);
  }

  .dropdown-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 7px 16px;
    font-size: 13.5px;
    color: var(--adm-text-body);
    transition: background 0.15s ease, color 0.15s ease;

    i {
      font-size: 15px;
      color: var(--adm-text-muted);
      width: 18px;
      text-align: center;
    }

    &:hover {
      background: var(--adm-primary-light);
      color: var(--adm-primary);

      i {
        color: var(--adm-primary);
      }
    }

    &.active {
      background: var(--adm-primary-light);
      color: var(--adm-primary);
      font-weight: 600;
    }
  }

  .dropdown-divider {
    margin: 4px 0;
    border-color: var(--adm-border);
  }
}

/* ─── Profile dropdown (wider, with header) ─── */
#header .dropdown-menu.profile {
  min-width: 200px;

  .dropdown-header {
    padding: 10px 16px 6px;

    h6 {
      font-size: 14px;
      font-weight: 700;
      color: var(--adm-text-dark);
      margin: 0;
    }

    span {
      font-size: 12px;
      color: var(--adm-text-muted);
    }
  }

  /* Button inside dropdown — matches .dropdown-item visually */
  button.dropdown-item {
    background: none;
    border: none;
    width: 100%;
    text-align: start;
    cursor: pointer;
  }
}

/* ═══════════════════════════════════════════════════════════
   2. SIDEBAR
   ═══════════════════════════════════════════════════════════ */

#sidebar.sidebar {
  position: fixed;
  inset-block-start: var(--adm-header-height);
  inset-inline-start: 0;
  inset-block-end: 0;
  width: var(--adm-sidebar-width);
  background: var(--adm-surface);
  box-shadow: 0 0 20px rgba(1, 41, 112, 0.08);
  overflow-y: auto;
  overflow-x: hidden;
  z-index: 1020;
  pointer-events: auto;
  transition: inset-inline-start 0.3s ease, width 0.3s ease;
  scrollbar-width: thin;
  scrollbar-color: var(--adm-border) transparent;

  &::-webkit-scrollbar {
    width: 5px;
  }
  &::-webkit-scrollbar-thumb {
    background: var(--adm-border);
    border-radius: 3px;
  }
}

/* ─── Sidebar Nav List ─── */
#sidebar .sidebar-nav {
  padding: 20px 0 30px;
  margin: 0;
  list-style: none;
}

/* ─── Section Heading ─── */
#sidebar .nav-heading {
  display: block;
  font-size: 10.5px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--adm-text-muted);
  padding: 18px 20px 6px;
  user-select: none;
}

/* ─── Nav Items ─── */
#sidebar .nav-item {
  margin-bottom: 2px;
}

/* ─── Nav Links ─── */
#sidebar .nav-link {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 20px;
  color: var(--adm-text-dark);
  font-size: 14px;
  font-weight: 500;
  text-decoration: none;
  border-inline-start: 3px solid transparent;
  transition:
    background 0.2s ease,
    color 0.2s ease,
    border-color 0.2s ease;

  i {
    font-size: 16px;
    color: var(--adm-text-dark);
    transition: color 0.2s ease;
    flex-shrink: 0;
    width: 20px;
    text-align: center;
  }

  span {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Collapsed (default inactive) state */
  &.collapsed {
    color: #4a5568;

    i {
      color: #718096;
    }

    &:hover {
      background: var(--adm-bg);
      color: var(--adm-primary);
      border-inline-start-color: rgba(65, 84, 241, 0.3);

      i {
        color: var(--adm-primary);
      }
    }
  }

  /* Active state */
  &.active {
    background: var(--adm-primary-light);
    color: var(--adm-primary);
    border-inline-start-color: var(--adm-primary);
    font-weight: 600;

    i {
      color: var(--adm-primary);
    }

    &:hover {
      background: var(--adm-primary-light);
    }
  }
}

/* ═══════════════════════════════════════════════════════════
   3. MAIN CONTENT AREA
   ═══════════════════════════════════════════════════════════ */

main.main#main {
  margin-inline-start: var(--adm-sidebar-width);
  padding: 20px 24px 24px;
  padding-top: calc(var(--adm-header-height) + 20px);
  min-height: 100vh;
  background: var(--adm-bg);
  transition: margin-inline-start 0.3s ease;
}

/* When user is not logged in, no sidebar offset */
main.main:not(#main) {
  margin-inline-start: 0;
  padding: 20px;
  padding-top: 20px;
  min-height: 100vh;
  background: var(--adm-bg);
}

/* ─── Page Title ─── */
.pagetitle {
  margin-bottom: 20px;

  h1 {
    font-size: 24px;
    font-weight: 700;
    color: var(--adm-text-dark);
    margin: 0 0 4px;
  }

  /* Breadcrumb */
  .breadcrumb {
    margin: 0;
    padding: 0;
    background: transparent;
    font-size: 13px;

    .breadcrumb-item {
      color: var(--adm-text-muted);

      a {
        color: var(--adm-primary);
        text-decoration: none;

        &:hover {
          text-decoration: underline;
        }
      }

      &.active {
        color: var(--adm-text-muted);
      }

      + .breadcrumb-item::before {
        color: var(--adm-border);
      }
    }
  }
}

/* ═══════════════════════════════════════════════════════════
   4. SECTION & DASHBOARD
   ═══════════════════════════════════════════════════════════ */

.section {
  padding: 0;
}

.section.dashboard {
  padding-top: 20px;
}

/* ═══════════════════════════════════════════════════════════
   5. CARDS — General
   ═══════════════════════════════════════════════════════════ */

#main .card {
  background: var(--adm-surface);
  border: 1px solid var(--adm-border);
  border-radius: var(--adm-radius);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
  margin-bottom: 20px;
  overflow: hidden;
  color: var(--adm-text-body);
  backdrop-filter: none;

  .card-body {
    padding: 20px;
  }

  .card-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--adm-text-dark);
    margin-bottom: 18px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--adm-border);

    span {
      font-size: 14px;
      font-weight: 400;
      color: var(--adm-text-muted);
    }
  }
}

/* ═══════════════════════════════════════════════════════════
   6. INFO CARDS (KPI Cards)
   ═══════════════════════════════════════════════════════════ */

#main .info-card {
  h6 {
    font-size: 22px;
    font-weight: 700;
    color: var(--adm-text-dark);
    margin: 0 0 2px;
    line-height: 1.2;
  }

  .text-muted {
    font-size: 12.5px;
  }
}

/* ─── Card Icon Circle ─── */
#main .card-icon {
  width: 44px;
  height: 44px;
  font-size: 20px;
  flex-shrink: 0;
  /* default: same as sales */
  background: var(--adm-icon-blue-bg);

  i {
    color: var(--adm-icon-blue);
  }
}

/* ─── Colored card variants ─── */
#main .sales-card .card-icon {
  background: var(--adm-icon-blue-bg);

  i { color: var(--adm-icon-blue); }
}

#main .revenue-card .card-icon {
  background: var(--adm-icon-green-bg);

  i { color: var(--adm-icon-green); }
}

#main .customers-card .card-icon {
  background: var(--adm-icon-purple-bg);

  i { color: var(--adm-icon-purple); }
}

/* ═══════════════════════════════════════════════════════════
   7. TABLES — inside admin main
   ═══════════════════════════════════════════════════════════ */

#main .table {
  font-size: 13.5px;
  color: var(--adm-text-body);

  thead th {
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--adm-text-muted);
    border-bottom-width: 1px;
    border-color: var(--adm-border);
    background: var(--adm-bg);
    padding: 10px 12px;
  }

  tbody td {
    padding: 10px 12px;
    vertical-align: middle;
    border-color: var(--adm-border);
  }

  &.table-striped tbody tr:nth-of-type(odd) {
    background: rgba(241, 245, 255, 0.5);
  }

  &.table-sm thead th,
  &.table-sm tbody td {
    padding: 7px 10px;
  }

  .table-success td {
    background: rgba(46, 202, 106, 0.08);
  }
}

/* ═══════════════════════════════════════════════════════════
   8. BUTTONS — scoped to admin main
   ═══════════════════════════════════════════════════════════ */

#main .btn {
  font-size: 13.5px;
  font-weight: 500;
  border-radius: 6px;
  padding: 7px 18px;
  transition: all 0.2s ease;
}

#main .btn-outline-primary {
  color: var(--adm-primary) !important;
  border-color: var(--adm-primary) !important;

  &:hover,
  &:focus {
    background-color: var(--adm-primary) !important;
    color: #fff !important;
  }
}

#main .btn-outline-success {
  color: #198754 !important;
  border-color: #198754 !important;

  &:hover,
  &:focus {
    background-color: #198754 !important;
    color: #fff !important;
  }
}

#main .btn-outline-info {
  color: #0dcaf0 !important;
  border-color: #0dcaf0 !important;

  &:hover,
  &:focus {
    background-color: #0dcaf0 !important;
    color: #fff !important;
  }
}

#main .btn-outline-danger {
  color: #dc3545 !important;
  border-color: #dc3545 !important;

  &:hover,
  &:focus {
    background-color: #dc3545 !important;
    color: #fff !important;
  }
}

#main .btn-outline-warning {
  color: #ffc107 !important;
  border-color: #ffc107 !important;

  &:hover,
  &:focus {
    background-color: #ffc107 !important;
    color: #000 !important;
  }
}

/* Solid button variants */
#main .btn-primary:not([class*="outline"]) {
  background-color: var(--adm-primary) !important;
  border-color: var(--adm-primary) !important;
  color: #fff !important;

  &:hover { background-color: var(--adm-primary-dark) !important; }
}

#main .btn-success:not([class*="outline"]) {
  background-color: #198754 !important;
  border-color: #198754 !important;
  color: #fff !important;

  &:hover { background-color: #157347 !important; }
}

#main .btn-danger:not([class*="outline"]) {
  background-color: #dc3545 !important;
  border-color: #dc3545 !important;
  color: #fff !important;

  &:hover { background-color: #bb2d3b !important; }
}

#main .btn-warning:not([class*="outline"]) {
  background-color: #ffc107 !important;
  border-color: #ffc107 !important;
  color: #000 !important;

  &:hover { background-color: #ffca2c !important; }
}

#main .btn-info:not([class*="outline"]) {
  background-color: #0dcaf0 !important;
  border-color: #0dcaf0 !important;
  color: #000 !important;

  &:hover { background-color: #31d2f2 !important; }
}

/* ═══════════════════════════════════════════════════════════
   9. BADGES
   ═══════════════════════════════════════════════════════════ */

#main .badge.bg-primary {
  background: var(--adm-primary) !important;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ═══════════════════════════════════════════════════════════
   10. TOGGLE SIDEBAR (body class)
   ═══════════════════════════════════════════════════════════ */

body.toggle-sidebar {
  #sidebar.sidebar {
    inset-inline-start: calc(-1 * var(--adm-sidebar-width));
    width: var(--adm-sidebar-width);
  }

  main.main#main {
    margin-inline-start: 0;
  }
}

/* ═══════════════════════════════════════════════════════════
   11. LOGIN / UNAUTHENTICATED PAGES
   ═══════════════════════════════════════════════════════════ */

/* Login page — centered card when there is no #sidebar */
body:has(#header):not(:has(#sidebar)) main.main {
  margin-inline-start: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ═══════════════════════════════════════════════════════════
   12. RESPONSIVE — MOBILE OVERLAY SIDEBAR
   ═══════════════════════════════════════════════════════════ */

@media (max-width: 1199px) {
  /* On tablet/mobile, sidebar is hidden by default */
  #sidebar.sidebar {
    inset-inline-start: calc(-1 * var(--adm-sidebar-width));
    box-shadow: none;
  }

  /* When sidebar is toggled ON, slide in + overlay */
  body.toggle-sidebar {
    #sidebar.sidebar {
      inset-inline-start: 0;
      box-shadow: 0 0 0 100vw rgba(0, 0, 0, 0.3);
    }

    main.main#main {
      margin-inline-start: 0;
    }
  }

  main.main#main {
    margin-inline-start: 0;
  }
}

/* ═══════════════════════════════════════════════════════════
   13. RTL SUPPORT
   ═══════════════════════════════════════════════════════════ */

[dir="rtl"] {
  /* Sidebar slides in from the right */
  #sidebar.sidebar {
    inset-inline-start: 0;
    inset-inline-end: unset;
    right: 0;
    left: unset;
  }

  /* Logo border flips */
  #header .logo {
    border-inline-end: none;
    border-inline-start: 1px solid var(--adm-border);
  }

  /* Toggle button visual tweak */
  #header .toggle-sidebar-btn {
    margin-inline-start: 0;
    margin-inline-end: 16px;
  }

  /* Active nav border on the right in RTL */
  #sidebar .nav-link {
    border-inline-start: none;
    border-inline-end: 3px solid transparent;

    &.active {
      border-inline-end-color: var(--adm-primary);
    }

    &.collapsed:hover {
      border-inline-end-color: rgba(65, 84, 241, 0.3);
    }
  }

  /* Dropdown arrow flips */
  #header .dropdown-menu-arrow::before {
    inset-inline-end: unset;
    inset-inline-start: 14px;
  }

  /* Main content offset flips */
  main.main#main {
    margin-inline-start: 0;
    margin-inline-end: var(--adm-sidebar-width);
    transition: margin-inline-end 0.3s ease;
  }

  &.toggle-sidebar main.main#main,
  body.toggle-sidebar main.main#main {
    margin-inline-end: 0;
  }

  @media (max-width: 1199px) {
    main.main#main {
      margin-inline-end: 0;
    }
  }
}

/* ═══════════════════════════════════════════════════════════
   14. SCROLLBAR — global thin style for admin layout
   ═══════════════════════════════════════════════════════════ */

#main,
#main * {
  scrollbar-width: thin;
  scrollbar-color: var(--adm-border) transparent;

  &::-webkit-scrollbar {
    width: 5px;
    height: 5px;
  }
  &::-webkit-scrollbar-thumb {
    background: var(--adm-border);
    border-radius: 3px;
  }
}

/* ═══════════════════════════════════════════════════════════
   15. UTILITY — misc helpers used in admin components
   ═══════════════════════════════════════════════════════════ */

/* text-warning / text-success inside info cards */
#main .text-warning { color: #f59e0b !important; }
#main .text-success { color: #198754 !important; }
#main .text-danger  { color: #dc3545 !important; }

/* Small muted label under a KPI value */
#main .info-card .text-muted.small,
#main .info-card span.text-muted {
  font-size: 12px;
  display: block;
  margin-top: 2px;
}

/* Top Products ranking badges */
#main .badge.rounded-circle {
  width: 28px;
  height: 28px;
  line-height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  flex-shrink: 0;
}
