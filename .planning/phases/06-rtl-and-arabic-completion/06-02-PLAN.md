---
phase: 06-rtl-and-arabic-completion
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - front/src/language/lang.ar.json
  - front/src/css/index.scss
  - front/src/css/ltr.scss
  - front/src/app-common/components/input/custom.react.select.tsx
  - front/src/app-common/components/input/shortcut.tsx
  - front/src/app-common/components/input/switch.tsx
  - front/src/app-common/components/react-aria/dropdown.menu.tsx
  - front/src/app-common/components/tabs/tabs.tsx
  - front/src/app-frontend/components/cart/order.totals.tsx
  - front/src/app-frontend/components/customers/customer.payments.tsx
  - front/src/app-frontend/components/customers/customers.tsx
  - front/src/app-frontend/components/inventory/purchase-orders/create.purchase.order.tsx
  - front/src/app-frontend/components/inventory/purchase-orders/purchase.orders.tsx
  - front/src/app-frontend/components/inventory/purchase/create.purchase.tsx
  - front/src/app-frontend/components/inventory/purchase/purchases.tsx
  - front/src/app-frontend/components/inventory/supplier/supplier.ledger.tsx
  - front/src/app-frontend/components/inventory/supplier/suppliers.tsx
  - front/src/app-frontend/components/modes/topbar.right.tsx
  - front/src/app-frontend/components/sale/apply.discount.tsx
  - front/src/app-frontend/components/sale/apply.tax.tsx
  - front/src/app-frontend/components/sale/expenses.tsx
  - front/src/app-frontend/components/sale/sale.find.tsx
  - front/src/app-frontend/components/sale/sale.history.tsx
  - front/src/app-frontend/components/sale/sale.inline.tsx
  - front/src/app-frontend/components/sale/sale.print.tsx
  - front/src/app-frontend/components/sale/sale.tsx
  - front/src/app-frontend/components/search/sale.brands.tsx
  - front/src/app-frontend/components/search/sale.categories.tsx
  - front/src/app-frontend/components/search/sale.departments.tsx
  - front/src/app-frontend/components/search/search.table.tsx
  - front/src/app-frontend/components/settings/brands/brands.tsx
  - front/src/app-frontend/components/settings/categories/categories.tsx
  - front/src/app-frontend/components/settings/departments/departments.tsx
  - front/src/app-frontend/components/settings/discounts/discount.types.tsx
  - front/src/app-frontend/components/settings/dynamic-barcodes/index.tsx
  - front/src/app-frontend/components/settings/items/export.items.tsx
  - front/src/app-frontend/components/settings/items/import.items.tsx
  - front/src/app-frontend/components/settings/items/item.tsx
  - front/src/app-frontend/components/settings/items/items.tsx
  - front/src/app-frontend/components/settings/more.tsx
  - front/src/app-frontend/components/settings/payment-types/payment.types.tsx
  - front/src/app-frontend/components/settings/stores/stores.tsx
  - front/src/app-frontend/components/settings/taxes/tax.types.tsx
  - front/src/app-frontend/components/settings/terminals/terminals.tsx
  - front/src/app-frontend/components/settings/users/users.tsx
  - front/src/app-frontend/containers/login/login.tsx
autonomous: true
requirements:
  - I18N-01
  - I18N-02
  - I18N-03

must_haves:
  truths:
    - "All 20 missing Arabic translation keys from Phases 1-5 are present in lang.ar.json with correct Arabic text"
    - "No ml-*/mr-* Tailwind classes remain in TSX/TS files — all replaced with ms-*/me-* logical equivalents"
    - "RTL layout spacing is correct on every POS screen — icons and text have proper margins that flip in Arabic"
    - "The [dir='rtl'] override block in index.scss is cleaned up — only custom component-specific overrides remain"
    - "SCSS @apply directives in ltr.scss use logical properties (ms-*/me-*) instead of physical (ml-*/mr-*)"
  artifacts:
    - path: "front/src/language/lang.ar.json"
      provides: "Complete Arabic translation file with all Phase 1-5 keys"
      contains: "تقرير Z"
    - path: "front/src/css/index.scss"
      provides: "Cleaned up [dir='rtl'] override block"
  key_links:
    - from: "front/src/language/lang.ar.json"
      to: "all components using useTranslation()"
      via: "i18next translation lookup"
      pattern: "t\\("
    - from: "front/src/css/index.scss [dir='rtl'] block"
      to: "front/src/app-frontend/ components"
      via: "CSS specificity override"
      pattern: "\\[dir=\"rtl\"\\]"
---

<objective>
Fill all Arabic translation gaps and migrate every physical direction CSS class (ml-*/mr-*/pl-*/pr-*) to logical equivalents (ms-*/me-*/ps-*/pe-*) across the entire codebase, then clean up the now-redundant RTL CSS override block.

Purpose: With infrastructure from 06-01 in place (Tailwind 3.3+, local Bootstrap, ConfigProvider), this plan makes the content RTL-correct — every screen shows proper Arabic translations and correct spacing in both LTR and RTL modes.
Output: Complete Arabic translation file, zero physical direction Tailwind classes in TSX/TS, cleaned-up RTL CSS overrides.
</objective>

<execution_context>
@/Users/abdellahi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/abdellahi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-rtl-and-arabic-completion/06-RESEARCH.md
@.planning/phases/06-rtl-and-arabic-completion/06-01-SUMMARY.md

@front/src/language/lang.ar.json
@front/src/language/lang.fr.json
@front/src/css/index.scss
@front/src/css/ltr.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fill all missing Arabic translation keys</name>
  <files>
    front/src/language/lang.ar.json
  </files>
  <action>
Add all 20 missing Arabic translation keys to `front/src/language/lang.ar.json`. These are keys that exist in lang.fr.json (or are used in Phase 1-5 components) but are missing from the Arabic file.

**Exact keys and values to add:**

| Key | Arabic Value |
|-----|-------------|
| `Z-Report` | `تقرير Z` |
| `Z-Reports` | `تقارير Z` |
| `Closed By` | `أُغلق بواسطة` |
| `Closed Sessions` | `الجلسات المغلقة` |
| `No closed sessions found` | `لا توجد جلسات مغلقة` |
| `Date Range` | `نطاق التاريخ` |
| `Vendor Report` | `تقرير المورد` |
| `Vendor` | `المورد` |
| `Vendor Performance` | `أداء الموردين` |
| `Top Vendors` | `أفضل الموردين` |
| `Category Report` | `تقرير الفئات` |
| `Category Performance` | `أداء الفئات` |
| `Margin` | `هامش الربح` |
| `Comparison J-1` | `مقارنة يوم -1` |
| `Avg Basket` | `متوسط السلة` |
| `Change` | `التغيير` |
| `Yesterday` | `أمس` |
| `T` | `ت` |
| `available` | `متوفر` |
| `in cart` | `في السلة` |

**Process:**
1. First, read `lang.ar.json` to find where to insert these keys (they should be added in alphabetical order or near related keys).
2. Also do a fresh diff between `lang.fr.json` and `lang.ar.json` to catch any OTHER keys that may have been added since the research was done. If new gaps are found, translate them too.
3. Add all missing keys with the Arabic translations specified above.
4. Validate that the JSON is syntactically correct after editing.

**Important:** Do NOT modify any existing translations — only ADD missing keys. The existing Arabic translations are correct and should not be changed.
  </action>
  <verify>
- `node -e "const fr=Object.keys(require('./front/src/language/lang.fr.json')); const ar=Object.keys(require('./front/src/language/lang.ar.json')); const missing=fr.filter(k=>!ar.includes(k)); console.log('Missing:', missing.length, missing);"` shows 0 missing keys
- `node -e "JSON.parse(require('fs').readFileSync('./front/src/language/lang.ar.json','utf8')); console.log('Valid JSON')"` prints "Valid JSON"
- `grep "تقرير Z" front/src/language/lang.ar.json` returns a match
- `grep "متوفر" front/src/language/lang.ar.json` returns a match
  </verify>
  <done>
- All 20+ missing Arabic translation keys are present in lang.ar.json with correct Arabic text
- Every key in lang.fr.json has a corresponding key in lang.ar.json
- JSON file is syntactically valid
- No existing translations were modified
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate ml-*/mr-* to ms-*/me-* and clean up RTL CSS overrides</name>
  <files>
    front/src/css/index.scss
    front/src/css/ltr.scss
    front/src/app-common/components/input/custom.react.select.tsx
    front/src/app-common/components/input/shortcut.tsx
    front/src/app-common/components/input/switch.tsx
    front/src/app-common/components/react-aria/dropdown.menu.tsx
    front/src/app-common/components/tabs/tabs.tsx
    front/src/app-frontend/components/cart/order.totals.tsx
    front/src/app-frontend/components/customers/customer.payments.tsx
    front/src/app-frontend/components/customers/customers.tsx
    front/src/app-frontend/components/inventory/purchase-orders/create.purchase.order.tsx
    front/src/app-frontend/components/inventory/purchase-orders/purchase.orders.tsx
    front/src/app-frontend/components/inventory/purchase/create.purchase.tsx
    front/src/app-frontend/components/inventory/purchase/purchases.tsx
    front/src/app-frontend/components/inventory/supplier/supplier.ledger.tsx
    front/src/app-frontend/components/inventory/supplier/suppliers.tsx
    front/src/app-frontend/components/modes/topbar.right.tsx
    front/src/app-frontend/components/sale/apply.discount.tsx
    front/src/app-frontend/components/sale/apply.tax.tsx
    front/src/app-frontend/components/sale/expenses.tsx
    front/src/app-frontend/components/sale/sale.find.tsx
    front/src/app-frontend/components/sale/sale.history.tsx
    front/src/app-frontend/components/sale/sale.inline.tsx
    front/src/app-frontend/components/sale/sale.print.tsx
    front/src/app-frontend/components/sale/sale.tsx
    front/src/app-frontend/components/search/sale.brands.tsx
    front/src/app-frontend/components/search/sale.categories.tsx
    front/src/app-frontend/components/search/sale.departments.tsx
    front/src/app-frontend/components/search/search.table.tsx
    front/src/app-frontend/components/settings/brands/brands.tsx
    front/src/app-frontend/components/settings/categories/categories.tsx
    front/src/app-frontend/components/settings/departments/departments.tsx
    front/src/app-frontend/components/settings/discounts/discount.types.tsx
    front/src/app-frontend/components/settings/dynamic-barcodes/index.tsx
    front/src/app-frontend/components/settings/items/export.items.tsx
    front/src/app-frontend/components/settings/items/import.items.tsx
    front/src/app-frontend/components/settings/items/item.tsx
    front/src/app-frontend/components/settings/items/items.tsx
    front/src/app-frontend/components/settings/more.tsx
    front/src/app-frontend/components/settings/payment-types/payment.types.tsx
    front/src/app-frontend/components/settings/stores/stores.tsx
    front/src/app-frontend/components/settings/taxes/tax.types.tsx
    front/src/app-frontend/components/settings/terminals/terminals.tsx
    front/src/app-frontend/components/settings/users/users.tsx
    front/src/app-frontend/containers/login/login.tsx
  </files>
  <action>
**Part A: Migrate Tailwind physical classes to logical classes in TSX/TS files (~70 occurrences across ~43 files)**

Apply the following substitutions in ALL TSX/TS files listed above:

| Find (regex word boundary) | Replace with |
|---------------------------|-------------|
| `ml-0` | `ms-0` |
| `ml-1` | `ms-1` |
| `ml-2` | `ms-2` |
| `ml-3` | `ms-3` |
| `ml-4` | `ms-4` |
| `mr-0` | `me-0` |
| `mr-1` | `me-1` |
| `mr-2` | `me-2` |
| `mr-3` | `me-3` |
| `mr-4` | `me-4` |
| `pl-1` | `ps-1` |
| `pl-2` | `ps-2` |
| `pl-3` | `ps-3` |
| `pr-1` | `pe-1` |
| `pr-2` | `pe-2` |
| `pr-3` | `pe-3` |

**Process for each file:**
1. Read the file
2. Find all instances of `ml-N`, `mr-N`, `pl-N`, `pr-N` in className strings
3. Replace with the logical equivalent (`ms-N`, `me-N`, `ps-N`, `pe-N`)
4. Save the file

**IMPORTANT exceptions — do NOT replace:**
- Bootstrap classes like `ms-auto`, `me-2`, `ps-3`, `pe-3` that ALREADY use logical properties (they are already correct)
- Negative margin classes like `-ml-2` — these should become `-ms-2`
- Classes in index.scss inside the `[dir="rtl"]` block — those are the override block being cleaned up separately

**Part B: Migrate SCSS @apply directives in ltr.scss (3 occurrences)**

In `front/src/css/ltr.scss`:

1. Line 808: `@apply bg-neutral-300 rounded-full inline-block ml-1 mr-0;`
   Change to: `@apply bg-neutral-300 rounded-full inline-block ms-1 me-0;`

2. Line 813: `@apply bg-primary-500 mr-1 ml-0;`
   Change to: `@apply bg-primary-500 me-1 ms-0;`

3. Line 928: `@apply shadow min-w-[32px] h-[32px] inline-flex rounded justify-center items-center mr-2 text-sm font-bold bg-white px-2;`
   Change to: `@apply shadow min-w-[32px] h-[32px] inline-flex rounded justify-center items-center me-2 text-sm font-bold bg-white px-2;`

**Part C: Clean up the [dir="rtl"] override block in index.scss**

The `[dir="rtl"]` block at lines 445-493 in `front/src/css/index.scss` contains CSS overrides that were a workaround for physical Tailwind classes. After migrating to logical classes, most of these are redundant.

**Remove these rules from the block** (they are now handled by Tailwind's logical properties automatically):
- `.mr-auto { ... }` — the ms-auto/me-auto logical classes handle this
- `.mr-2, .mr-3 { ... }` — replaced by me-2/me-3 logical classes
- `.ml-2, .ml-3 { ... }` — replaced by ms-2/ms-3 logical classes
- `.me-2, .me-3 { ... }` — Bootstrap RTL CSS already handles these
- `.ps-3 { ... }` — Bootstrap RTL CSS already handles this

**KEEP these rules** (they are custom component-specific overrides that cannot be expressed with utility classes):
- `.product-grid-categories { direction: rtl; }` — needed for grid layout
- `.product-grid-info { text-align: right; }` — needed for product info alignment
- `.pos-topbar-actions { margin-left: unset; margin-right: auto; }` — custom component positioning
- `.text-end { text-align: left !important; }` — Bootstrap RTL inversion
- `.image-upload-preview .image-upload-remove { right: auto; left: 6px; }` — absolute positioning fix

The resulting `[dir="rtl"]` block should only contain the 5 custom rules listed above.
  </action>
  <verify>
- `grep -rn "\bml-[0-9]\|\bmr-[0-9]\|\bpl-[0-9]\|\bpr-[0-9]" front/src/ --include="*.tsx" --include="*.ts"` returns zero matches
- `grep -rn "\bml-[0-9]\|\bmr-[0-9]" front/src/css/ltr.scss` returns zero matches
- `grep -c "mr-2\|mr-3\|ml-2\|ml-3\|mr-auto\|ps-3\|me-2\|me-3" front/src/css/index.scss` returns 0 (removed from RTL block)
- `grep "product-grid-categories\|pos-topbar-actions\|image-upload-preview" front/src/css/index.scss` returns matches (kept overrides)
- `cd front && npm run build` completes without errors
  </verify>
  <done>
- All ~73 physical direction Tailwind classes (ml-*/mr-*/pl-*/pr-*) in TSX/TS files replaced with logical equivalents (ms-*/me-*/ps-*/pe-*)
- 3 SCSS @apply directives in ltr.scss migrated to logical properties
- [dir="rtl"] override block in index.scss cleaned up — only 5 custom component-specific rules remain
- Zero physical direction Tailwind classes remain in TSX/TS source files
- Vite build succeeds
  </done>
</task>

</tasks>

<verification>
1. **Translation completeness:** Run diff between lang.fr.json and lang.ar.json keys — zero missing keys
2. **Physical class elimination:** `grep -rn "\bml-[0-9]\|\bmr-[0-9]\|\bpl-[0-9]\|\bpr-[0-9]" front/src/ --include="*.tsx" --include="*.ts" --include="*.scss"` returns zero matches
3. **Build success:** `cd front && npm run build` completes without errors
4. **RTL override cleanup:** The `[dir="rtl"]` block in index.scss contains only custom component overrides (5 rules), not generic utility overrides
</verification>

<success_criteria>
- lang.ar.json contains all keys present in lang.fr.json — zero translation gaps
- All Phase 1-5 new features (Z-Report, vendor/category reports, stock alerts) have Arabic translations
- Zero ml-*/mr-*/pl-*/pr-* Tailwind physical direction classes remain in TSX/TS/SCSS source files
- The [dir="rtl"] CSS override block is minimized to only custom component rules
- Vite production build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-rtl-and-arabic-completion/06-02-SUMMARY.md`
</output>
